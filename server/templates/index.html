<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>인구 밀집도 모니터링</title>
</head>
<body>
    <div id="message-container"></div>

    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        socket.on('message', function() {
            // 받은 메시지를 HTML에 추가
            var messageContainer = document.getElementById('message-container');
            messageContainer.innerHTML += '<p>' + message + '</p>';
        });

        // 예시: 일정 간격으로 메시지 전송
        setInterval(function() {
            var randomValue = Math.random();
            socket.emit('message', 'New value: ' + randomValue);
        }, 2000);  // 2초마다 메시지 전송
    </script>
     <!-- <h1>인구 밀집도 모니터링</h1>
     <p>인구 밀집도: <span id="people-count"></span></p>
     <img id="video" src="{{ url_for('video_feed') }}" alt="OpenCV Image Stream">
     <script>
         const peopleCount = document.querySelector("#people-count");
         const video = document.querySelector("#video");

         function updatePeopleCount() {
             // 플라스크 서버에서 인구 밀집도를 가져옴
             fetch("/receive_image", { method: 'POST' })
               .then((response) => response.json())
               .then((data) => {
                console.log(data)
                 if (data && data.num !== undefined) {
                       peopleCount.innerHTML = data.num;

                       if (data.num === -1) {
                         alert("인구 밀집도가 위험합니다!");
                       }
                 } else {
                       console.error("서버에서 올바른 형식의 데이터를 반환하지 않았습니다.");
                 }
               })
                .catch(error => {
                    console.error("데이터를 가져오는 도중 오류 발생:", error);
                });
         }

         setInterval(updatePeopleCount, 1000); // 1초마다 업데이트
     </script> -->
</body>
</html>


     <!-- <div id="value-container"></div>
     <script>
        // 주기적으로 서버에 요청을 보내고 값을 업데이트하는 함수
        function pollValue() {
            $.ajax({
                url: '/get_value',
                method: 'GET',
                dataType: 'json',
                success: function(data) {
                    // 받은 값을 HTML에 업데이트
                    var valueContainer = $('#value-container');
                    valueContainer.text('Current value: ' + data.value);

                    // 주기적으로 함수 호출
                    setTimeout(pollValue, 2000);  // 2초마다 호출
                },
                error: function() {
                    // 에러 처리
                    console.error('Error fetching value');
                }
            });
        }

        // 초기에 한 번 호출
        pollValue();
    </script> -->
    
 
